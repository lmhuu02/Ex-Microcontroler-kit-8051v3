C51 COMPILER V9.52.0.0   LCD_KS0108                                                        08/07/2014 11:44:48 PAGE 1   


C51 COMPILER V9.52.0.0, COMPILATION OF MODULE LCD_KS0108
OBJECT MODULE PLACED IN lcd_ks0108.obj
COMPILER INVOKED BY: C:\Keil_v5\C51\BIN\C51.EXE lcd_ks0108\lcd_ks0108.c BROWSE DEBUG OBJECTEXTEND PRINT(.\lcd_ks0108.lst
                    -) TABS(2) OBJECT(lcd_ks0108.obj)

line level    source

   1          #include "lcd_ks0108.h"
   2           code unsigned char font7x8[]= {
   3                   0,   0,   0,   0,   0,   0,   0,       //' ' 32
   4                   0,   6,  95,  95,   6,   0,   0,       //'!'
   5                   0,   7,   7,   0,   7,   7,   0,       //'"'
   6                   20, 127, 127,  20, 127, 127,  20,      //'#'
   7                   36,  46, 107, 107,  58,  18,   0,      //'$'
   8                   70, 102,  48,  24,  12, 102,  98,      //'%'
   9                   48, 122,  79,  93,  55, 122,  72,      //'&'
  10                   4,   7,   3,   0,   0,   0,   0,       //'''
  11                   0,  28,  62,  99,  65,   0,   0,       //'('
  12                   0,  65,  99,  62,  28,   0,   0,       //')'
  13                   8,  42,  62,  28,  28,  62,  42,       //'*'
  14                   8,   8,  62,  62,   8,   8,   0,       //'+'
  15                   0, 128, 224,  96,   0,   0,   0,       //','
  16                   8,   8,   8,   8,   8,   8,   0,       //'-'
  17                   0,   0,  96,  96,   0,   0,   0,       //'.'
  18                   96,  48,  24,  12,   6,   3,   1,      //'/'
  19                   62, 127, 113,  89,  77, 127,  62,      //'0'
  20                   64,  66, 127, 127,  64,  64,   0,      //'1'
  21                   98, 115,  89,  73, 111, 102,   0,      //'2'
  22                   34,  99,  73,  73, 127,  54,   0,      //'3'
  23                   24,  28,  22,  83, 127, 127,  80,      //'4'
  24                   39, 103,  69,  69, 125,  57,   0,      //'5'
  25                   60, 126,  75,  73, 121,  48,   0,      //'6'
  26                   3,   3, 113, 121,  15,   7,   0,       //'7'
  27                   54, 127,  73,  73, 127,  54,   0,      //'8'
  28                   6,  79,  73, 105,  63,  30,   0,       //'9'
  29                   0,   0, 102, 102,   0,   0,   0,       //':'
  30                   0, 128, 230, 102,   0,   0,   0,       //';'
  31                   8,  28,  54,  99,  65,   0,   0,       //'<'
  32                   36,  36,  36,  36,  36,  36,   0,      //'='
  33                   0,  65,  99,  54,  28,   8,   0,       //'>'
  34                   2,   3,  81,  89,  15,   6,   0,       //'?'
  35                   62, 127,  65,  93,  93,  31,  30,      //'@'
  36                   124, 126,  19,  19, 126, 124,   0,     //'A'
  37                   65, 127, 127,  73,  73, 127,  54,      //'B'
  38                   28,  62,  99,  65,  65,  99,  34,      //'C'
  39                   65, 127, 127,  65,  99,  62,  28,      //'D'
  40                   65, 127, 127,  73,  93,  65,  99,      //'E'
  41                   65, 127, 127,  73,  29,   1,   3,      //'F'
  42                   28,  62,  99,  65,  81, 115, 114,      //'G'
  43                   127, 127,   8,   8, 127, 127,   0,     //'H'
  44                   0,  65, 127, 127,  65,   0,   0,       //'I'
  45                   48, 112,  64,  65, 127,  63,   1,      //'J'
  46                   65, 127, 127,   8,  28, 119,  99,      //'K'
  47                   65, 127, 127,  65,  64,  96, 112,      //'L'
  48                   127, 127,  14,  28,  14, 127, 127,     //'M'
  49                   127, 127,   6,  12,  24, 127, 127,     //'N'
  50                   28,  62,  99,  65,  99,  62,  28,      //'O'
  51                   65, 127, 127,  73,   9,  15,   6,      //'P'
  52                   30,  63,  33, 113, 127,  94,   0,      //'Q'
  53                   65, 127, 127,   9,  25, 127, 102,      //'R'
  54                   38, 111,  77,  89, 115,  50,   0,      //'S'
C51 COMPILER V9.52.0.0   LCD_KS0108                                                        08/07/2014 11:44:48 PAGE 2   

  55                   3,  65, 127, 127,  65,   3,   0,       //'T'
  56                   127, 127,  64,  64, 127, 127,   0,     //'U'
  57                   31,  63,  96,  96,  63,  31,   0,      //'V'
  58                   127, 127,  48,  24,  48, 127, 127,     //'W'
  59                   67, 103,  60,  24,  60, 103,  67,      //'X'
  60                   7,  79, 120, 120,  79,   7,   0,       //'Y'
  61                 71,  99, 113,  89,  77, 103, 115,      //'Z'
  62                 0, 127, 127,  65,  65,   0,   0,       //'['
  63                 1,   3,   6,  12,  24,  48,  96,       //'\'
  64                 0,  65,  65, 127, 127,   0,   0,       //']'
  65                 8,  12,   6,   3,   6,  12,   8,       //'^'
  66                 128, 128, 128, 128, 128, 128, 128,     //'_'
  67                 0,   0,   3,   7,   4,   0,   0,       //'`'
  68                 32, 116,  84,  84,  60, 120,  64,      //'a'
  69                 65, 127,  63,  72,  72, 120,  48,      //'b'
  70                   56, 124,  68,  68, 108,  40,   0,      //'c'
  71                 48, 120,  72,  73,  63, 127,  64,      //'d'
  72                 56, 124,  84,  84,  92,  24,   0,      //'e'
  73                 72, 126, 127,  73,   3,   2,   0,      //'f'
  74                 56, 188, 164, 164, 252, 120,   0,      //'g'
  75                 65, 127, 127,   8,   4, 124, 120,      //'h'
  76                 0,  68, 125, 125,  64,   0,   0,       //'i'
  77                 96, 224, 128, 128, 253, 125,   0,      //'j'
  78                 65, 127, 127,  16,  56, 108,  68,      //'k'
  79                 0,  65, 127, 127,  64,   0,   0,       //'l'
  80                 120, 124,  28,  56,  28, 124, 120,     //'m'
  81                 124, 124,   4,   4, 124, 120,   0,     //'n'
  82                 56, 124,  68,  68, 124,  56,   0,      //'o'
  83                 0, 252, 252, 164,  36,  60,  24,       //'p'
  84                 24,  60,  36, 164, 248, 252, 132,      //'q'
  85                 68, 124, 120,  76,   4,  28,  24,      //'r'
  86                 72,  92,  84,  84, 116,  36,   0,      //'s'
  87                 0,   4,  62, 127,  68,  36,   0,       //'t'
  88                 60, 124,  64,  64,  60, 124,  64,      //'u'
  89                 28,  60,  96,  96,  60,  28,   0,      //'v'
  90                 60, 124, 112,  56, 112, 124,  60,      //'w'
  91                 68, 108,  56,  16,  56, 108,  68,      //'x'
  92                 60, 188, 160, 160, 252, 124,   0,      //'y'
  93                 76, 100, 116,  92,  76, 100,   0,      //'z'
  94                 8,   8,  62, 119,  65,  65,   0,       //'{'
  95                 0,   0,   0, 119, 119,   0,   0,       //'|'
  96                 65,  65, 119,  62,   8,   8,   0,      //'}'
  97                 2,   3,   1,   3,   2,   3,   1,       //'~'
  98                 255, 129,  129,  129,  129, 129, 255,  //''
  99                 14, 159, 145, 177, 251,  74,   0       //'?
 100          };
 101          
 102          void GLCD_delay(void)
 103            {
 104   1          unsigned char i;
 105   1          for(i=0;i<=20;i++)
 106   1            _nop_();
 107   1        }
 108          void GLCD_setside(char side)
 109            {
 110   1          if(side==1)   //1=right
 111   1            {
 112   2              GLCD_CS1=0;
 113   2              GLCD_CS2=1;
 114   2            }
 115   1          else
 116   1            {
C51 COMPILER V9.52.0.0   LCD_KS0108                                                        08/07/2014 11:44:48 PAGE 3   

 117   2              GLCD_CS1=1;
 118   2              GLCD_CS2=0;
 119   2            }
 120   1          GLCD_delay();
 121   1        }
 122          void wait_GLCD(void)
 123              {
 124   1            GLCD_RS=0;
 125   1            GLCD_RW=1;
 126   1            GLCD_EN=1;
 127   1            GLCD_delay();
 128   1            GLCD_EN=0;
 129   1            while(GLCD_busy)
 130   1              {
 131   2                GLCD_EN=1;
 132   2                GLCD_delay();
 133   2                GLCD_EN=0;
 134   2              }
 135   1          }
 136          void GLCD_setdisplay(unsigned char ON)
 137              {
 138   1            wait_GLCD();
 139   1            GLCD_RS=0;
 140   1            GLCD_RW=0;
 141   1            GLCD_DATA=GLCD_display+ON;
 142   1            GLCD_EN=1;
 143   1            GLCD_delay();
 144   1            GLCD_EN=0;
 145   1          }
 146          void GLCD_setyaddress(unsigned char col)
 147              {
 148   1            wait_GLCD();
 149   1            GLCD_RS=0;
 150   1            GLCD_RW=0;
 151   1            GLCD_DATA=GLCD_yaddress+col;
 152   1            GLCD_EN=1;
 153   1            GLCD_delay();
 154   1            GLCD_EN=0;
 155   1          }
 156          void GLCD_setxaddress(unsigned char row)
 157              {
 158   1            wait_GLCD();
 159   1            GLCD_RS=0;
 160   1            GLCD_RW=0;
 161   1            GLCD_DATA=GLCD_xaddress+row;
 162   1            GLCD_EN=1;
 163   1            GLCD_delay();
 164   1            GLCD_EN=0;
 165   1          }
 166          void GLCD_startline(unsigned char offset)
 167              {
 168   1            wait_GLCD();
 169   1            GLCD_RS=0;
 170   1            GLCD_RW=0;
 171   1            GLCD_DATA=GLCD_statline+offset;
 172   1            GLCD_EN=1;
 173   1            GLCD_delay();
 174   1            GLCD_EN=0;
 175   1          }
 176          void GLCD_writedata(unsigned char dat)
 177              {
 178   1            wait_GLCD();
C51 COMPILER V9.52.0.0   LCD_KS0108                                                        08/07/2014 11:44:48 PAGE 4   

 179   1            GLCD_RS=1;
 180   1            GLCD_RW=0;
 181   1            GLCD_DATA=dat;
 182   1            GLCD_EN=1;
 183   1            GLCD_delay();
 184   1            GLCD_EN=0;
 185   1            GLCD_delay();
 186   1          }
 187          unsigned char GLCD_readdata(void)
 188              {
 189   1            unsigned char temp;
 190   1            wait_GLCD();
 191   1            GLCD_RS=1;
 192   1            GLCD_RW=1;
 193   1            GLCD_EN=1;
 194   1            GLCD_delay();
 195   1            temp=GLCD_DATA;
 196   1            GLCD_EN=0;
 197   1            GLCD_delay();
 198   1            return temp;
 199   1          }
 200          void GLCD_init(void)
 201              {
 202   1            GLCD_setside(0);
 203   1            GLCD_setdisplay(1);
 204   1            GLCD_setyaddress(0);
 205   1            GLCD_setxaddress(0);
 206   1            GLCD_startline(0);
 207   1            
 208   1            GLCD_setside(1);
 209   1            GLCD_setdisplay(1);
 210   1            GLCD_setyaddress(0);
 211   1            GLCD_setxaddress(0);
 212   1            GLCD_startline(0);
 213   1          }
 214          void GLCD_gotoxy(unsigned char row, unsigned char col)
 215              {
 216   1            unsigned char side;
 217   1            side=col/64;
 218   1            GLCD_setside(side);
 219   1            col-=col*64;
 220   1            GLCD_setyaddress(col);
 221   1            GLCD_setxaddress(row);
 222   1          }
 223          void GLCD_clear(void)
 224              {
 225   1            unsigned char col,row;
 226   1            for(row=0;row<8;row++)
 227   1              {
 228   2                GLCD_gotoxy(row,0);
 229   2                for(col=0;col<64;col++)
 230   2                  GLCD_writedata(0);
 231   2              }
 232   1            for(row=0;row<8;row++)
 233   1              {
 234   2                GLCD_gotoxy(row,64);
 235   2                for(col=0;col<64;col++)
 236   2                  GLCD_writedata(0);
 237   2              }
 238   1          }
 239          void GLCD_putchar(unsigned char row,unsigned char col, unsigned char chr)
 240              {
C51 COMPILER V9.52.0.0   LCD_KS0108                                                        08/07/2014 11:44:48 PAGE 5   

 241   1            unsigned char i;
 242   1            if((col>57)&&(col<64))
 243   1              {
 244   2                GLCD_gotoxy(row,col);
 245   2                for(i=0;i<64-col;i++)
 246   2                  
 247   2                    GLCD_writedata(font7x8[((chr-32)*7)+i]);
 248   2                    GLCD_gotoxy(row,64);
 249   2                    for(i=64-col;i<7;i++)
 250   2                    GLCD_writedata(font7x8[((chr-32)*7)+i]);
 251   2              }
 252   1            else
 253   1              {
 254   2                GLCD_gotoxy(row,col);
 255   2                for(i=0;i<7;i++)
 256   2                  GLCD_writedata(font7x8[((chr-32)*7)+i]);
 257   2              }
 258   1          }
 259          void GLCD_puts(unsigned char row, unsigned char col, char *str)
 260              {
 261   1            unsigned char i,x;
 262   1            x=col;
 263   1            for(i=0;str[i]!=0;i++)
 264   1              {
 265   2                if(x>=128)
 266   2                  {
 267   3                    col=0;
 268   3                    x=col;
 269   3                    row++;
 270   3                  }
 271   2                GLCD_putchar(row,x,str[i]);
 272   2                x+=8;
 273   2              }
 274   1              
 275   1          }
 276            
 277          void GLCD_putbmp(char *bmp)
 278              {
 279   1            unsigned char row, col;
 280   1            unsigned int i;
 281   1            for(row=0;row<8;row++)
 282   1              {
 283   2                GLCD_gotoxy(row,0);
 284   2                for(col=0;col<64;col++)
 285   2                  {
 286   3                    i=128*row+col;
 287   3                    GLCD_writedata(bmp[i]);
 288   3                  }
 289   2                GLCD_gotoxy(row,64);
 290   2                for(col=64;col<128;col++)
 291   2                  {
 292   3                    i=128*row+col;
 293   3                    GLCD_writedata(bmp[i]);
 294   3                  }
 295   2              }
 296   1          }


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =    580    ----
   CONSTANT SIZE    =    679    ----
   XDATA SIZE       =   ----    ----
C51 COMPILER V9.52.0.0   LCD_KS0108                                                        08/07/2014 11:44:48 PAGE 6   

   PDATA SIZE       =   ----    ----
   DATA SIZE        =   ----      14
   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
